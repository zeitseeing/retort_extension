
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Honeybadger=t()}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e){var t=e.default;if("function"==typeof t){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var r={},o={},i={},a={},c="<unknown>";var u=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,s=/\((\S*)(?::(\d+))(?::(\d+))\)/;var l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var f=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,d=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;var p=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;var h=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;var g=Object.freeze({__proto__:null,parse:function(e){return e.split("\n").reduce((function(e,t){var n=function(e){var t=u.exec(e);if(!t)return null;var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),o=s.exec(t[2]);r&&null!=o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]);return{file:n?null:t[2],methodName:t[1]||c,arguments:n?[t[2]]:[],lineNumber:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}(t)||function(e){var t=l.exec(e);if(!t)return null;return{file:t[2],methodName:t[1]||c,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}}(t)||function(e){var t=f.exec(e);if(!t)return null;var n=t[3]&&t[3].indexOf(" > eval")>-1,r=d.exec(t[3]);n&&null!=r&&(t[3]=r[1],t[4]=r[2],t[5]=null);return{file:t[3],methodName:t[1]||c,arguments:t[2]?t[2].split(","):[],lineNumber:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}(t)||function(e){var t=h.exec(e);if(!t)return null;return{file:t[2],methodName:t[1]||c,arguments:[],lineNumber:+t[3],column:t[4]?+t[4]:null}}(t)||function(e){var t=p.exec(e);if(!t)return null;return{file:t[3],methodName:t[1]||c,arguments:[],lineNumber:+t[4],column:t[5]?+t[5]:null}}(t);return n&&e.push(n),e}),[])}}),y=n(g);!function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},i=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))},a=e&&e.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserConfig=t.clone=t.formatCGIData=t.filterUrl=t.filter=t.generateStackTrace=t.endpoint=t.instrument=t.isErrorObject=t.makeNotice=t.logger=t.sanitize=t.shallowClone=t.runAfterNotifyHandlers=t.runBeforeNotifyHandlers=t.getSourceForBacktrace=t.getCauses=t.calculateBacktraceShift=t.DEFAULT_BACKTRACE_SHIFT=t.makeBacktrace=t.objectIsExtensible=t.objectIsEmpty=t.mergeNotice=t.merge=void 0;var c=o(y);function u(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}function s(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=console);try{var r=c.parse(e).map((function(e){return{file:e.file,method:e.methodName,number:e.lineNumber,column:e.column}}));return t&&r.splice(0,f(r)),r}catch(e){return n.debug(e),[]}}function l(e){var t=!1,n=!1;return e.file&&(t=e.file.toLowerCase().indexOf("@honeybadger-io")>-1),e.method&&(n=e.method.toLowerCase().indexOf("@honeybadger-io")>-1),t||n}function f(e){for(var n=0,r=0;r<e.length;r++){var o=e[r];if(!l(o)){if(!o.file||"<anonymous>"===o.file){var i=e[r+1];if(i&&l(i)){n++;continue}}break}n++}return n||t.DEFAULT_BACKTRACE_SHIFT}function d(e){if("object"!=typeof e||null===e)return{};var t={};for(var n in e)t[n]=e[n];return t}function p(e){return e instanceof Error||"[object Error]"===Object.prototype.toString.call(e)}function h(e,t){for(var n=0;n<t.length;n++)if(-1!==e.toLowerCase().indexOf(t[n].toLowerCase()))return!0;return!1}function g(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&n===e}t.merge=u,t.mergeNotice=function(e,t){var n=u(e,t);return e.context&&t.context&&(n.context=u(e.context,t.context)),n},t.objectIsEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.objectIsExtensible=function(e){return"function"!=typeof Object.isExtensible||Object.isExtensible(e)},t.makeBacktrace=s,t.DEFAULT_BACKTRACE_SHIFT=3,t.calculateBacktraceShift=f,t.getCauses=function(e,t){if(e.cause){for(var n=[],r=e;n.length<3&&(r=r.cause);)n.push({class:r.name,message:r.message,backtrace:"string"==typeof r.stack?s(r.stack,!1,t):null});return n}return[]},t.getSourceForBacktrace=function(e,t){return i(this,void 0,void 0,(function(){var n,r,o,i;return a(this,(function(a){switch(a.label){case 0:if(n=[],!t||!e||!e.length)return[2,n];r=0,a.label=1;case 1:return e.length?(o=e.splice(0)[r],[4,t(o.file)]):[3,3];case 2:return i=a.sent(),n[r]=function(e,t,n){void 0===n&&(n=2);if(!e)return null;var r=e.split("\n");r.unshift("");for(var o=t+n,i={},a=t-n;a<=o;a++){var c=r[a];"string"==typeof c&&(i[a]=c)}return i}(i,o.number),r++,[3,1];case 3:return[2,n]}}))}))},t.runBeforeNotifyHandlers=function(e,t){for(var n=!0,r=0,o=t.length;r<o;r++){!1===(0,t[r])(e)&&(n=!1)}return n},t.runAfterNotifyHandlers=function(e,t,n){e&&e.afterNotify&&e.afterNotify(n,e);for(var r=0,o=t.length;r<o;r++)t[r](n,e);return!0},t.shallowClone=d,t.sanitize=function(e,t){void 0===t&&(t=8);var n=[];function r(e,r){if(void 0===r&&(r=0),r>=t)return"[DEPTH]";if(!function(e){var t=typeof e;return/function/.test(t)?"toJSON"===e.name:!/symbol/.test(t)&&null!==e&&("object"!=typeof e||void 0!==e.hasOwnProperty)}(e))return Object.prototype.toString.call(e);if(function(e){if(!e||"object"!=typeof e)return!1;for(var t=0;t<n.length;t++)if(n[t]===e)return!0;return n.push(e),!1}(e))return"[RECURSION]";if(Array.isArray(e))return e.map((function(e){return o(e,r+1)}));if("object"==typeof e){var i={};for(var a in e){var c=e[a];Object.prototype.hasOwnProperty.call(e,a)&&null!=a&&null!=c&&(i[a]=o(c,r+1))}return i}return e}function o(e,t){void 0===t&&(t=0);try{return r(e,t)}catch(e){return"[ERROR] ".concat(e)}}return o(e)},t.logger=function(e){var t=function(t){return function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if("debug"===t){if(!e.config.debug)return;t="log"}r.unshift("[Honeybadger]"),(n=e.config.logger)[t].apply(n,r)}};return{log:t("log"),info:t("info"),debug:t("debug"),warn:t("warn"),error:t("error")}},t.makeNotice=function(e){var t;if(e)if(p(e)){var n=e;t=u(e,{name:n.name,message:n.message,stack:n.stack,cause:n.cause})}else if("object"==typeof e)t=d(e);else{t={message:String(e)}}else t={};return t},t.isErrorObject=p,t.instrument=function(e,t,n){if(e&&t&&n&&t in e){for(var r=e[t];r&&r.__hb_original;)r=r.__hb_original;try{e[t]=n(r),e[t].__hb_original=r}catch(e){}}},t.endpoint=function(e,t){var n=e.trim().replace(/\/$/,"");return t=t.trim().replace(/(^\/|\/$)/g,""),"".concat(n,"/").concat(t)},t.generateStackTrace=function(){try{throw new Error("")}catch(e){if(e.stack)return e.stack}for(var e=10,t=[],n=arguments.callee;n&&t.length<e;){/function(?:\s+([\w$]+))+\s*\(/.test(n.toString())?t.push(RegExp.$1||"<anonymous>"):t.push("<anonymous>");try{n=n.caller}catch(e){break}}return t.join("\n")},t.filter=function(e,t){if(g("Object",e)){g("Array",t)||(t=[]);var n=[];return function e(r){var o,i;if(g("Object",r)||g("Array",r)){if(-1!==n.indexOf(r))return"[CIRCULAR DATA STRUCTURE]";n.push(r)}if(g("Object",r)){for(o in i={},r)h(o,t)?i[o]="[FILTERED]":i[o]=e(r[o]);return i}return g("Array",r)?r.map((function(t){return e(t)})):g("Function",r)?"[FUNC]":r}(e)}},t.filterUrl=function(e,t){if(!t)return e;if("string"!=typeof e)return e;var n=e.split(/\?/,2)[1];if(!n)return e;var r=e;return n.split(/[&]\s?/).forEach((function(e){var n=e.split("=",2),o=n[0],i=n[1];h(o,t)&&(r=r.replace("".concat(o,"=").concat(i),"".concat(o,"=[FILTERED]")))})),r},t.formatCGIData=function(e,t){void 0===t&&(t="");var n={};return Object.keys(e).forEach((function(r){var o=t+r.replace(/\W/g,"_").toUpperCase();n[o]=e[r]})),n},t.clone=function(e){return JSON.parse(JSON.stringify(e))},t.isBrowserConfig=function(e){return void 0!==e.async}}(a);var b={};Object.defineProperty(b,"__esModule",{value:!0}),b.GlobalStore=void 0;var m=a,v=function(){function e(e,t){this.contents=e,this.breadcrumbsLimit=t}return e.create=function(t,n){return new e(t,n)},e.prototype.available=function(){return!0},e.prototype.getContents=function(e){var t=e?this.contents[e]:this.contents;return JSON.parse(JSON.stringify(t))},e.prototype.setContext=function(e){this.contents.context=(0,m.merge)(this.contents.context,e||{})},e.prototype.addBreadcrumb=function(e){this.contents.breadcrumbs.length==this.breadcrumbsLimit&&this.contents.breadcrumbs.shift(),this.contents.breadcrumbs.push(e)},e.prototype.clear=function(){this.contents.context={},this.contents.breadcrumbs=[]},e.prototype.run=function(e){return e()},e}();b.GlobalStore=v;var _=e&&e.__assign||function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},_.apply(this,arguments)};Object.defineProperty(i,"__esModule",{value:!0}),i.Client=void 0;var w=a,O=b,E={name:"honeybadger-js",url:"https://github.com/honeybadger-io/honeybadger-js",version:"4.8.1"},j=/,|\s+/,k=/\S/,x=function(){function e(e,t){void 0===e&&(e={}),this.__pluginsExecuted=!1,this.__store=null,this.__beforeNotifyHandlers=[],this.__afterNotifyHandlers=[],this.config=_({apiKey:null,endpoint:"https://api.honeybadger.io",environment:null,hostname:null,projectRoot:null,component:null,action:null,revision:null,reportData:null,breadcrumbsEnabled:!0,maxBreadcrumbs:40,maxObjectDepth:8,logger:console,developmentEnvironments:["dev","development","test"],debug:!1,tags:null,enableUncaught:!0,enableUnhandledRejection:!0,afterUncaught:function(){return!0},filters:["creditcard","password"],__plugins:[]},e),this.__initStore(),this.__transport=t,this.logger=(0,w.logger)(this)}return e.prototype.getVersion=function(){return E.version},e.prototype.configure=function(e){var t=this;for(var n in void 0===e&&(e={}),e)this.config[n]=e[n];return this.__pluginsExecuted||(this.__pluginsExecuted=!0,this.config.__plugins.forEach((function(e){return e.load(t)}))),this},e.prototype.__initStore=function(){this.__store=new O.GlobalStore({context:{},breadcrumbs:[]},this.config.maxBreadcrumbs)},e.prototype.beforeNotify=function(e){return this.__beforeNotifyHandlers.push(e),this},e.prototype.afterNotify=function(e){return this.__afterNotifyHandlers.push(e),this},e.prototype.setContext=function(e){return"object"==typeof e&&null!=e&&this.__store.setContext(e),this},e.prototype.resetContext=function(e){return this.logger.warn("Deprecation warning: `Honeybadger.resetContext()` has been deprecated; please use `Honeybadger.clear()` instead."),this.__store.clear(),"object"==typeof e&&null!==e&&this.__store.setContext(e),this},e.prototype.clear=function(){return this.__store.clear(),this},e.prototype.notify=function(e,t,n){var r=this;void 0===t&&(t=void 0),void 0===n&&(n=void 0);var o=null,i=this.makeNotice(e,t,n);i||(this.logger.debug("failed to build error report"),o=new Error("failed to build error report")),o||!1!==this.config.reportData||(this.logger.debug("skipping error report: honeybadger.js is disabled",i),o=new Error("honeybadger.js is disabled")),!o&&this.__developmentMode()&&(this.logger.log("honeybadger.js is in development mode; the following error report will be sent in production.",i),o=new Error("honeybadger.js is in development mode")),o||this.config.apiKey||(this.logger.warn("could not send error report: no API key has been configured",i),o=new Error("missing API key"));var a=i&&i.backtrace?i.backtrace.map((function(e){return(0,w.shallowClone)(e)})):null,c=(0,w.runBeforeNotifyHandlers)(i,this.__beforeNotifyHandlers);if(o||c||(this.logger.debug("skipping error report: beforeNotify handlers returned false",i),o=new Error("beforeNotify handlers returned false")),o)return(0,w.runAfterNotifyHandlers)(i,this.__afterNotifyHandlers,o),!1;this.addBreadcrumb("Honeybadger Notice",{category:"notice",metadata:{message:i.message,name:i.name,stack:i.stack}});var u=this.__store.getContents("breadcrumbs");return i.__breadcrumbs=this.config.breadcrumbsEnabled?u:[],(0,w.getSourceForBacktrace)(a,this.__getSourceFileHandler).then((function(e){e.forEach((function(e,t){i.backtrace[t].source=e}));var t=r.__buildPayload(i);r.__transport.send({headers:{"X-API-Key":r.config.apiKey,"Content-Type":"application/json",Accept:"text/json, application/json"},method:"POST",endpoint:(0,w.endpoint)(r.config.endpoint,"/v1/notices/js"),maxObjectDepth:r.config.maxObjectDepth,logger:r.logger},t).then((function(e){if(201!==e.statusCode)return(0,w.runAfterNotifyHandlers)(i,r.__afterNotifyHandlers,new Error("Bad HTTP response: ".concat(e.statusCode))),void r.logger.warn("Error report failed: unknown response from server. code=".concat(e.statusCode));var t=JSON.parse(e.body).id;(0,w.runAfterNotifyHandlers)((0,w.merge)(i,{id:t}),r.__afterNotifyHandlers),r.logger.info("Error report sent âš¡ https://app.honeybadger.io/notice/".concat(t))})).catch((function(e){r.logger.error("Error report failed: an unknown error occurred.","message=".concat(e.message)),(0,w.runAfterNotifyHandlers)(i,r.__afterNotifyHandlers,e)}))})),!0},e.prototype.notifyAsync=function(e,t,n){var r=this;return void 0===t&&(t=void 0),void 0===n&&(n=void 0),new Promise((function(o,i){var a,c,u;a=e.afterNotify?e:t&&t.afterNotify?t:n&&n.afterNotify?n:t&&"object"==typeof t?t:n||(t={}),u=(c=a).afterNotify,c.afterNotify=function(e){if(null==u||u.call(r,e),e)return i(e);o()},r.notify(e,t,n)}))},e.prototype.makeNotice=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=void 0);var r=(0,w.makeNotice)(e);t&&"object"!=typeof t&&(t={name:String(t)});if(t&&(r=(0,w.mergeNotice)(r,t)),"object"==typeof n&&null!==n&&(r=(0,w.mergeNotice)(r,n)),(0,w.objectIsEmpty)(r))return null;var o=this.__store.getContents("context"),i=this.__constructTags(r.tags),a=this.__constructTags(o.tags),c=this.__constructTags(this.config.tags),u=i.concat(a).concat(c),s=u.filter((function(e,t){return u.indexOf(e)===t}));return"string"==typeof(r=(0,w.merge)(r,{name:r.name||"Error",context:(0,w.merge)(o,r.context),projectRoot:r.projectRoot||this.config.projectRoot,environment:r.environment||this.config.environment,component:r.component||this.config.component,action:r.action||this.config.action,revision:r.revision||this.config.revision,tags:s})).stack&&r.stack.trim()?r.backtrace=(0,w.makeBacktrace)(r.stack,!1,this.logger):(r.stack=(0,w.generateStackTrace)(),r.backtrace=(0,w.makeBacktrace)(r.stack,!0,this.logger)),r},e.prototype.addBreadcrumb=function(e,t){if(this.config.breadcrumbsEnabled){var n=(0,w.shallowClone)((t=t||{}).metadata),r=t.category||"custom",o=(new Date).toISOString();return this.__store.addBreadcrumb({category:r,message:e,metadata:n,timestamp:o}),this}},e.prototype.__getBreadcrumbs=function(){return this.__store.getContents("breadcrumbs").slice()},e.prototype.__getContext=function(){return this.__store.getContents("context")},e.prototype.__developmentMode=function(){return!0!==this.config.reportData&&(this.config.environment&&this.config.developmentEnvironments.includes(this.config.environment))},e.prototype.__buildPayload=function(e){var t=(0,w.filter)(e.headers,this.config.filters)||{},n=(0,w.filter)(_(_({},e.cgiData),(0,w.formatCGIData)(t,"HTTP_")),this.config.filters);return{notifier:E,breadcrumbs:{enabled:!!this.config.breadcrumbsEnabled,trail:e.__breadcrumbs||[]},error:{class:e.name,message:e.message,backtrace:e.backtrace,fingerprint:e.fingerprint,tags:e.tags,causes:(0,w.getCauses)(e,this.logger)},request:{url:(0,w.filterUrl)(e.url,this.config.filters),component:e.component,action:e.action,context:e.context,cgi_data:n,params:(0,w.filter)(e.params,this.config.filters)||{},session:(0,w.filter)(e.session,this.config.filters)||{}},server:{project_root:e.projectRoot,environment_name:e.environment,revision:e.revision,hostname:this.config.hostname,time:(new Date).toUTCString()},details:e.details||{}}},e.prototype.__constructTags=function(e){return e?e.toString().split(j).filter((function(e){return k.test(e)})):[]},e}();i.Client=x;var T={};Object.defineProperty(T,"__esModule",{value:!0}),function(t){var n=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},c=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Types=t.Client=void 0;var u=i;Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return u.Client}}),o(b,t),t.Types=c(T),t.Util=c(a)}(o);var N={};function C(e){if(!e||!e.tagName)return"";var t=e.tagName.toLowerCase();if("html"===t)return"";e.id&&(t+="#".concat(e.id));var n=e.getAttribute("class");n&&n.split(/\s+/).forEach((function(e){t+=".".concat(e)})),["alt","name","title","type"].forEach((function(n){var r=e.getAttribute(n);r&&(t+="[".concat(n,'="').concat(r,'"]'))}));var r=function(e){try{var t=e.parentNode.childNodes,n=[];return Array.prototype.forEach.call(t,(function(t){t.tagName&&t.tagName===e.tagName&&n.push(t)})),n}catch(e){return[]}}(e);return r.length>1&&(t+=":nth-child(".concat(Array.prototype.indexOf.call(r,e)+1,")")),t}function S(e){return-1!==e.toString().indexOf("native")}function P(e){var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/)||{};return{protocol:t[2],host:t[4],pathname:t[5]}}function R(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:window}Object.defineProperty(N,"__esModule",{value:!0}),N.globalThisOrWindow=N.preferCatch=N.encodeCookie=N.decodeCookie=N.localURLPathname=N.parseURL=N.nativeFetch=N.stringTextOfElement=N.stringSelectorOfElement=N.stringNameOfElement=void 0,N.stringNameOfElement=C,N.stringSelectorOfElement=function e(t){var n=C(t);if(t.parentNode&&t.parentNode.tagName){var r=e(t.parentNode);if(r.length>0)return"".concat(r," > ").concat(n)}return n},N.stringTextOfElement=function(e){var t=e.textContent||e.innerText||"";return t||"submit"!==e.type&&"button"!==e.type||(t=e.value),function(e,t){e.length>t&&(e=e.substr(0,t)+"...");return e}(t.trim(),300)},N.nativeFetch=function(){var e=R();if(!e.fetch)return!1;if(S(e.fetch))return!0;try{var t=document.createElement("iframe");t.style.display="none",document.head.appendChild(t);var n=t.contentWindow.fetch&&S(t.contentWindow.fetch);return document.head.removeChild(t),n}catch(e){console&&console.warn&&console.warn("failed to detect native fetch via iframe: "+e)}return!1},N.parseURL=P,N.localURLPathname=function(e){var t=P(e),n=P(document.URL);return t.host&&t.protocol?t.protocol===n.protocol&&t.host===n.host?t.pathname:"".concat(t.protocol,"://").concat(t.host).concat(t.pathname):t.pathname},N.decodeCookie=function(e){var t={};return e.split(/[;,]\s?/).forEach((function(e){var n=e.split("=",2),r=n[0],o=n[1];t[r]=o})),t},N.encodeCookie=function(e){if("object"==typeof e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join(";")}},N.preferCatch=function(){var e=!0;if("undefined"==typeof window)return e;if(window.atob||(e=!1),window.ErrorEvent)try{0===new window.ErrorEvent("").colno&&(e=!1)}catch(e){}return e}(),N.globalThisOrWindow=R;var U={};Object.defineProperty(U,"__esModule",{value:!0}),U.onError=U.ignoreNextOnError=void 0;var H,A=o,B=N,M=A.Util.instrument,L=A.Util.makeNotice,I=0;U.ignoreNextOnError=function(){I+=1,clearTimeout(H),H=setTimeout((function(){I=0}))},U.onError=function(e){return void 0===e&&(e=(0,B.globalThisOrWindow)()),{load:function(t){M(e,"onerror",(function(n){var r=function(e,n,r,o,i){if(t.logger.debug("window.onerror callback invoked",arguments),I>0)return t.logger.debug("Ignoring window.onerror (error likely reported earlier)",arguments),void(I-=1);if(0===r&&/Script error\.?/.test(e))t.config.enableUncaught&&t.logger.warn("Ignoring cross-domain script error: enable CORS to track these types of errors",arguments);else{var a=L(i);a.name||(a.name="window.onerror"),a.message||(a.message=e),a.stack||(a.stack=[a.message,"\n    at ? (",n||"unknown",":",r||0,":",o||0,")"].join("")),t.addBreadcrumb("window.onerror"!==a.name&&a.name?"window.onerror: ".concat(a.name):"window.onerror",{category:"error",metadata:{name:a.name,message:a.message,stack:a.stack}}),t.config.enableUncaught&&t.notify(a)}};return function(t,o,i,a,c){return r(t,o,i,a,c),"function"==typeof n&&n.apply(e,arguments)}}))}}};var D={};Object.defineProperty(D,"__esModule",{value:!0});var W=N,F=o.Util.instrument;D.default=function(e){return void 0===e&&(e=(0,W.globalThisOrWindow)()),{load:function(t){t.config.enableUnhandledRejection&&F(e,"onunhandledrejection",(function(e){function n(e){var n;if(t.logger.debug("window.onunhandledrejection callback invoked",arguments),t.config.enableUnhandledRejection){var r=e.reason;if(r instanceof Error){var o="unknown",i=0,a="".concat(r.message,"\n    at ? (").concat(o,":").concat(i,")"),c=r.stack||a,u={name:r.name,message:"UnhandledPromiseRejectionWarning: ".concat(r),stack:c};return t.addBreadcrumb("window.onunhandledrejection: ".concat(u.name),{category:"error",metadata:u}),void t.notify(u)}var s="string"==typeof r?r:null!==(n=JSON.stringify(r))&&void 0!==n?n:"Unspecified reason";t.notify({name:"window.onunhandledrejection",message:"UnhandledPromiseRejectionWarning: ".concat(s)})}}return function(t){n(t),"function"==typeof e&&e.apply(this,arguments)}}))}}};var q={};Object.defineProperty(q,"__esModule",{value:!0});var G=o,K=N,$=G.Util.sanitize,J=G.Util.instrument;q.default=function(e){return void 0===e&&(e=(0,K.globalThisOrWindow)()),{load:function(t){function n(e){return!0===t.config.breadcrumbsEnabled||(e?!0===t.config.breadcrumbsEnabled[e]:!1!==t.config.breadcrumbsEnabled)}!function(){function r(e){return Array.isArray(e)?e.map((function(e){try{return String(e)}catch(e){return"[unknown]"}})).join(" "):""}n("console")&&["debug","info","warn","error","log"].forEach((function(n){J(e.console,n,(function(o){return function(){var i=Array.prototype.slice.call(arguments),a=r(i),c={category:"log",metadata:{level:n,arguments:$(i,3)}};t.addBreadcrumb(a,c),"function"==typeof o&&Function.prototype.apply.call(o,e.console,arguments)}}))}))}(),n("dom")&&e.addEventListener("click",(function(e){var n,r,o;try{n=(0,K.stringNameOfElement)(e.target),r=(0,K.stringSelectorOfElement)(e.target),o=(0,K.stringTextOfElement)(e.target)}catch(e){n="UI Click",r="[unknown]",o="[unknown]"}0!==n.length&&t.addBreadcrumb(n,{category:"ui.click",metadata:{selector:r,text:o,event:e}})}),!!e.location),n("network")&&"undefined"!=typeof XMLHttpRequest&&(J(XMLHttpRequest.prototype,"open",(function(e){return function(){var t=this,n=arguments[1],r="string"==typeof arguments[0]?arguments[0].toUpperCase():arguments[0],o="".concat(r," ").concat((0,K.localURLPathname)(n));this.__hb_xhr={type:"xhr",method:r,url:n,message:o},"function"==typeof e&&e.apply(t,arguments)}})),J(XMLHttpRequest.prototype,"send",(function(e){return function(){var n=this;function r(){if(4===n.readyState){var e=void 0;n.__hb_xhr&&(n.__hb_xhr.status_code=n.status,e=n.__hb_xhr.message,delete n.__hb_xhr.message),t.addBreadcrumb(e||"XMLHttpRequest",{category:"request",metadata:n.__hb_xhr})}}"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?J(n,"onreadystatechange",(function(e){return function(){r(),"function"==typeof e&&e.apply(this,arguments)}})):n.onreadystatechange=r,"function"==typeof e&&e.apply(n,arguments)}}))),n("network")&&(0,K.nativeFetch)()&&J(e,"fetch",(function(n){return function(){var r,o=arguments[0],i="GET";"string"==typeof o?r=o:"Request"in e&&o instanceof Request?(r=o.url,o.method&&(i=o.method)):r=String(o),arguments[1]&&arguments[1].method&&(i=arguments[1].method),"string"==typeof i&&(i=i.toUpperCase());var a="".concat(i," ").concat("undefined"==typeof document?r:(0,K.localURLPathname)(r)),c={type:"fetch",method:i,url:r};return n.apply(this,arguments).then((function(e){return c.status_code=e.status,t.addBreadcrumb(a,{category:"request",metadata:c}),e})).catch((function(e){throw t.addBreadcrumb("fetch error",{category:"error",metadata:c}),e}))}})),function(){if(n("navigation")&&null!=e.location){var r=e.location.href;J(e,"onpopstate",(function(t){return function(){if(o(r,e.location.href),t)return t.apply(this,arguments)}})),J(e.history,"pushState",i),J(e.history,"replaceState",i)}function o(e,n){r=n,t.addBreadcrumb("Page changed",{category:"navigation",metadata:{from:e,to:n}})}function i(e){return function(){var t=arguments.length>2?arguments[2]:void 0;return t&&o(r,String(t)),e.apply(this,arguments)}}}()}}};var X={};Object.defineProperty(X,"__esModule",{value:!0});var z=N,V=o.Util.instrument;X.default=function(e){return void 0===e&&(e=(0,z.globalThisOrWindow)()),{load:function(t){!function(){function n(e){return function(n){return function(r,o){if("function"==typeof r){var i=Array.prototype.slice.call(arguments,2);return r=t.__wrap(r,e),n((function(){r.apply(void 0,i)}),o)}return n(r,o)}}}V(e,"setTimeout",n({component:"setTimeout"})),V(e,"setInterval",n({component:"setInterval"}))}()}}};var Q={};Object.defineProperty(Q,"__esModule",{value:!0});var Y=N,Z=o.Util.instrument;Q.default=function(e){return void 0===e&&(e=(0,Y.globalThisOrWindow)()),{load:function(t){["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"].forEach((function(n){var r=e[n]&&e[n].prototype;r&&Object.prototype.hasOwnProperty.call(r,"addEventListener")&&(Z(r,"addEventListener",(function(e){var r={component:"".concat(n,".prototype.addEventListener")};return function(n,o,i,a){try{o&&null!=o.handleEvent&&(o.handleEvent=t.__wrap(o.handleEvent,r))}catch(e){t.logger.error(e)}return e.call(this,n,t.__wrap(o,r),i,a)}})),Z(r,"removeEventListener",(function(e){return function(n,r,o,i){return e.call(this,n,r,o,i),e.call(this,n,t.__wrap(r),o,i)}})))}))}}};var ee={},te=e&&e.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}u((r=r.apply(e,t||[])).next())}))},ne=e&&e.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.BrowserTransport=void 0;var re=N,oe=o.Util.sanitize;var ie=function(){function e(){}return e.prototype.send=function(e,t){return te(this,void 0,void 0,(function(){var n,r,o,i,a;return ne(this,(function(c){switch(c.label){case 0:return n=e.headers?(u=e.headers,Object.entries(u)):[],r={},n.forEach((function(e){var t=e[0],n=e[1];null!=t&&null!=n&&(r[String(t)]=String(n))})),o={method:e.method,headers:r},"POST"===e.method&&(o.body=t?JSON.stringify(oe(t,e.maxObjectDepth)):void 0),[4,(0,re.globalThisOrWindow)().fetch(e.endpoint,o)];case 1:return[4,(i=c.sent()).text()];case 2:return a=c.sent(),[2,Promise.resolve({statusCode:i.status,body:a})]}var u}))}))},e}();return ee.BrowserTransport=ie,function(t){var n,r=e&&e.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=e&&e.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Types=void 0;var c=o,u=N,s=U,l=a(D),f=a(q),d=a(X),p=a(Q),h=ee,g=c.Util.merge,y=c.Util.filter,b=c.Util.objectIsExtensible,m=function(e){function t(t){void 0===t&&(t={});var n=this,r=(0,u.globalThisOrWindow)(),o="";return null!=r.location&&(o=r.location.protocol+"//"+r.location.host),(n=e.call(this,i({async:!0,maxErrors:null,projectRoot:o},t),new h.BrowserTransport)||this).__errorsSent=0,n.__lastWrapErr=void 0,n.__beforeNotifyHandlers=[function(e){return n.__exceedsMaxErrors()?(n.logger.debug("Dropping notice: max errors exceeded",e),!1):(e&&!e.url&&"undefined"!=typeof document&&(e.url=document.URL),n.__incrementErrorsCount(),!0)}],n}return r(t,e),t.prototype.configure=function(t){return void 0===t&&(t={}),e.prototype.configure.call(this,t)},t.prototype.resetMaxErrors=function(){return this.__errorsSent=0},t.prototype.factory=function(e){return new t(e)},t.prototype.checkIn=function(e){throw new Error("Honeybadger.checkIn() is not supported on the browser")},t.prototype.__buildPayload=function(t){var n,r={HTTP_USER_AGENT:void 0,HTTP_REFERER:void 0,HTTP_COOKIE:void 0};r.HTTP_USER_AGENT=navigator.userAgent,"undefined"!=typeof document&&document.referrer.match(/\S/)&&(r.HTTP_REFERER=document.referrer),(n="string"==typeof t.cookies?(0,u.decodeCookie)(t.cookies):t.cookies)&&(r.HTTP_COOKIE=(0,u.encodeCookie)(y(n,this.config.filters)));var o=e.prototype.__buildPayload.call(this,t);return o.request.cgi_data=g(r,o.request.cgi_data),o},t.prototype.__wrap=function(e,t){void 0===t&&(t={});var n=e;t||(t={});try{if("function"!=typeof n)return n;if(!b(n))return n;if(!n.___hb){var r=this;n.___hb=function(){if(!u.preferCatch)return n.apply(this,arguments);try{return n.apply(this,arguments)}catch(e){if(r.__lastWrapErr===e)throw e;throw r.__lastWrapErr=e,(0,s.ignoreNextOnError)(),r.addBreadcrumb(t.component?"".concat(t.component,": ").concat(e.name):e.name,{category:"error",metadata:{message:e.message,name:e.name,stack:e.stack}}),r.config.enableUncaught&&r.notify(e),e}}}return n.___hb.___hb=n.___hb,n.___hb}catch(e){return n}},t.prototype.__incrementErrorsCount=function(){return this.__errorsSent++},t.prototype.__exceedsMaxErrors=function(){return this.config.maxErrors&&this.__errorsSent>=this.config.maxErrors},t}(c.Client),v=o;Object.defineProperty(t,"Types",{enumerable:!0,get:function(){return v.Types}}),t.default=new m({__plugins:[(0,s.onError)(),(0,l.default)(),(0,d.default)(),(0,p.default)(),(0,f.default)()]})}(r),t(r)}));
//# sourceMappingURL=honeybadger.min.js.map
